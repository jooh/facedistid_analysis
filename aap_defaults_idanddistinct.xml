<?xml version="1.0" encoding="utf-8"?>
<aap>    
   <directory_conventions>
       <SPMdir desc='Directory of SPM' ui='dir'>/imaging/jc01/matlab/spm8</SPMdir>
      <fieldmapsdirname desc='' ui='dir'>fieldmaps</fieldmapsdirname>
      <structdirname desc='' ui='dir'>structurals</structdirname>
      <tmapsdirname desc='' ui='dir'>realtime_tmaps</tmapsdirname>
      <specialseriesdirname desc='' ui='text'>specialseries</specialseriesdirname>
      <eventsdirname  desc='' ui='text'>events</eventsdirname>
      <rawdatadir desc='CUSTOM' ui='dir'>/imaging/jc01/research/idanddistinct/raw/dicoms</rawdatadir>
      <rawmegdatadir desc='' ui='dir'>/megdata/cbu/</rawmegdatadir>
      <T1template desc='' ui='dir'>/home/jc01/matlab/spm8/templates/T1.nii</T1template>
      <rawdataafterconversionprefix desc='' ui='text'>f</rawdataafterconversionprefix>
      <subject_directory_format desc='' ui='optionlist' options='manual|CBU060500|S01'>3
      </subject_directory_format>
      <subject_filenames_format desc='' ui='optionlist' options='manual|CBU060500|S01'>4
      </subject_filenames_format>
      <rawseries_usefileorder desc='CUSTOM' ui='yesno'>0</rawseries_usefileorder>
      <selectechonumbers desc='' ui='vector_array' range='[1 Inf]'>0</selectechonumbers>
      <reportname desc='' ui='file' ext='.htm'>fullreport.htm</reportname>
      <stats_singlesubj desc='' ui='dir'></stats_singlesubj>
      <rfx desc='' ui='dir'></rfx>
      <dartelsubjdirname desc='' ui='dir'>dartel</dartelsubjdirname>
      <outputformat options='splitbymodule|onedirectory' ui='optionlist'>splitbymodule</outputformat>
      <analysisid ui='dir_part'></analysisid>
      <analysisid_suffix ui='dir_part'></analysisid_suffix>
      <remotefilesystem  desc='' options='none|s3' ui='optionlist'>none</remotefilesystem>
      <dicomfolderstructure desc='CUSTOM' ui='text'>series</dicomfolderstructure>
      <seriesoutputformat desc='sprintf formatting string to get series directory from number - at AWS Series_%04d  at CBU Series_%03d*; at CABI *_%d' ui='text'>Series_%03d_*</seriesoutputformat>
      <seriesnamingconvention desc='Used by aas_getseriesnumber to choose naming convention of incoming data - CBU= Series_003_MPRAGE; CABI= fmri_3_4' ui='optionlist' options='CBU|CABI'>CBU</seriesnamingconvention>
      <protocol_fieldmap ui='text'>FieldMapping_32chn</protocol_fieldmap>
      <protocol_structural ui='text'>MEMPRAGE_4E_1mm</protocol_structural>
      <dicomfilter ui='text'>*.dcm</dicomfilter>
      <fsldir desc='Path to fsl' ui='dir'>/imaging/local/software/fsl/v5.0.2/x86_64/fsl</fsldir>
      <fslsetup desc='Path to fsl setup script, executing before any fsl command' ui='text'></fslsetup>
      <fsloutputtype desc='NIFTI or NIFTI_GZ' ui='test'>NIFTI</fsloutputtype>
      <fslshell desc='Shell used to run FSL' ui='text'>none</fslshell>
      <condorwrapper desc='Command to run a job within condor' ui='dir'></condorwrapper>
      <ROIdir desc='Directory where ROIs (in template space) are kept' ui='text'>/home/rcusack/ROIs</ROIdir>
      <ANTSdir desc='Path to Advanced Normalisation Tools (ANTS)' ui='dir'>/cn_apps/ANTs-1.9.x-Linux</ANTSdir>
      <fieldtripdir desc='Path to fieltrip toolbox' ui='dir'>/cn_apps/fieldtrip</fieldtripdir>
      <freesurferdir desc='Path to freesurfer toolbox' ui='dir'>/imaging/local/software/freesurfer/latest/x86_64</freesurferdir>
      <freesurferperl desc='Version of PERL library in freesurfer' ui='text'>5.8.5</freesurferperl>
      <freesurfershell desc='Shell used to run FSL' ui='text'>tcsh</freesurfershell>
      <niftysegdir desc='Path to fieltrip toolbox' ui='dir'>/cn_apps/niftyseg</niftysegdir>
      <DMLTdir desc='Path to Donders Machine Learning Toolbox toolbox' ui='dir'>/cn_apps/DMLT</DMLTdir>
      <allowremotecache desc='Allow local caching of files from remote server' ui='optionlist'>1</allowremotecache>
      <parallel_dependencies desc='Describes relationships of different domains of processing' ui='custom'>
          <study desc='The whole study (root)' ui='custom'>
              <subject desc='A subject' ui='custom'>
                  <session desc='A session' ui='custom'>
                      <searchlight_package desc='A searchlight' ui='custom'/>
                  </session>
              </subject>
              <hyperalignment_searchlight_package desc='A searchlight containing multiple subjects' ui='custom'>
                  <hyperalignment_subject desc='One subject of one searchlight' ui='custom'>                        
                  </hyperalignment_subject>
              </hyperalignment_searchlight_package>
          </study>
                          
      </parallel_dependencies>
   </directory_conventions>
   <options>
       <symlinkwhenpossible ui='yesno'>1</symlinkwhenpossible>
       <email desc='undocumented but non-optional' ui='yesno'>0</email>
       <timelog desc='undocumented but non-optional' ui='yesno'>0</timelog>
       <verbose desc='How verbose to be' ui='yesno'>1</verbose>
       <autoidentifystructural desc='Automatically identify structurals?' ui='yesno'>1</autoidentifystructural>
      <autoidentifystructural_multiple desc='allow multiples? Undocumented but necessary' ui='yesno'>0</autoidentifystructural_multiple>
      <autoidentifystructural_chooselast desc='Automatically select last of structurals when there is more than one?' ui='yesno'>0</autoidentifystructural_chooselast>
      <autoidentifystructural_choosefirst desc='Automatically select first of structurals when there is more than one?' ui='yesno'>1</autoidentifystructural_choosefirst>
      <autoidentifystructural_average desc='Average across structurals when there is more than one?' ui='yesno'>0</autoidentifystructural_average>
      <autoidentifyfieldmaps desc='Automatically identify field maps?' ui='yesno'>1</autoidentifyfieldmaps>
      <autoidentifyfieldmaps_chooselast desc='Automatically select last of fieldmaps when there is more than one?' ui='yesno'>0</autoidentifyfieldmaps_chooselast>
      <autoidentifyfieldmaps_choosefirst desc='Automatically select first of fieldmaps when there is more than one?' ui='yesno'>1</autoidentifyfieldmaps_choosefirst>
      <autoidentifytmaps desc='Automatically identify t maps?' ui='yesno'>1</autoidentifytmaps>
      <autoidentifyfieldmaps_number desc='undocumented but necessary' ui='double'>8</autoidentifyfieldmaps_number>
      <aa_minver desc='Minimum allowed aa version' ui='double'>4</aa_minver>
      <aa_maxver desc='Maximum allowed aa version' ui='double'>4</aa_maxver>
      <userinterface desc='User interface for checking and specifying task parameters' ui='yesno'>0</userinterface>
      <wheretoprocess desc='where to do processing' options='localsingle|localparallel|aws' ui='optionlist'>localsingle</wheretoprocess>
      <qsub desc='Qsub options' ui='none'>
          <memoryMult desc='Memory multiplier for qsub' ui='double'>1</memoryMult>
          <timeMult desc='Time multiplier for qsub' ui='double'>1</timeMult>
          <verbose desc='Verbose output for qsub?' ui='yesno'>0</verbose>
      </qsub>
      <customDCMconvert desc='Do we use a custom DICOM converter?' ui='text'></customDCMconvert>
  </options>
  
  <gui_controls>
      <usecolouroutput desc='use colour to organise text output written to display' ui='yesno'>1</usecolouroutput>
      <colours>
          <completedpreviously ui='rgb'>1 0 1</completedpreviously>
          <running ui='rgb'>0.5 0 0.5</running>
          <completed ui='rgb'>0.5 0 0.5</completed>
          <inputstreams ui='rgb'>0.5 0.5 0.5</inputstreams>
          <outputstreams ui='rgb'>0.5 0.5 0.5</outputstreams>
          <executing ui='rgb'>0 0.5 0</executing>
      </colours>
  </gui_controls>
  
   <acq_details>
      <root desc='Root on local machine for processed data' ui='dir'></root>
      <s3>
          <root desc='Root on S3 for processed data' ui='dir'>teststudy</root>
      </s3>
      <numdummies desc='Number of dummy scans' ui='int'>0</numdummies>
      <topscannumber desc='Ignore EPI scans after this one' ui='int'/>

      <subjects>
          <mriname desc='Subject MRI filename' ui='dir_part_allowwildcards'/>
          <megname desc='Subject MRI filename' ui='dir_part_allowwildcards'/>
          <structural desc='Structural session number in raw data' ui='int'/>
          <tmaps desc='Real time t maps session number in raw data' ui='int'/>
          <specialseries desc='special series session number in raw data' ui='int'/>
          <ignoreseries desc='series to be ignored when automatically scanning raw data' ui='int'/>
          <fieldmaps ui='intarray'/>
      	  <newfieldmap ui='dir_part'/>
          <structuralfn ui='dir_part'/>
          <siemensfieldmap ui='intarray'/>
	  <seriesnumbers desc='Session numbers for EPI' ui='intarray' />
       </subjects>
       <sessions desc='Functional sessions' ui='intarray'>
         <name desc='Session name' ui='dir_part'/>
       </sessions>
       <selected_sessions desc='Allows subselection of a subset of series, usually during branching' ui='intarray'/>
   </acq_details>
   
   <timeouts>
      <starting desc='timeout period for spm startup (mins)' ui='int'>.5</starting>
      <joballocated desc='timeout period for worker prepare (mins)' ui='int'>2</joballocated> 
      <busy desc='timeout period for worker job (mins)' ui='int'>120</busy>
      <bored desc='timeout period for bored worker (mins)' ui='int'>5</bored>
   </timeouts>      

</aap>
